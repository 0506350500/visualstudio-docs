---
title: "CA5361: Do Not Disable SChannel Use of Strong Crypto"
ms.date: 07/10/2019
ms.topic: reference
author: dotpaul
ms.author: paulming
manager: jillfra
dev_langs:
 - CSharp
 - VB
ms.workload:
  - "multiple"
f1_keywords:
  - "CA5361"
  - "DoNotSetSwitch"
---
# CA5361: Do Not Disable SChannel Use of Strong Crypto

|||
|-|-|
|TypeName|DoNotSetSwitch|
|CheckId|CA5361|
|Category|Microsoft.Security|
|Breaking Change|Non Breaking|

## Cause

A <xref:System.AppContext.SetSwitch?displayProperty=nameWithType> method call sets `Switch.System.Net.DontEnableSchUseStrongCrypto` to `true`.

## Rule description

Setting `Switch.System.Net.DontEnableSchUseStrongCrypto` to `true` weakens the security of outgoing Transport Layer Security (TLS) connections, by using weaker cryptography. See [Transport Layer Security (TLS) best practices with the .NET Framework](/dotnet/framework/network-programming/tls#switchsystemnetdontenableschusestrongcrypto) for more information.

## How to fix violations

- If your application targets .NET Framework v4.6 or later, you can remove the <xref:System.AppContext.SetSwitch?displayProperty=nameWithType> method call.
- If your application targets .NET Framework earlier than v4.6, and runs on .NET Framework v4.6 or later, set the switch's value to `false`.

## When to suppress warnings

Suppress this warning if you must connect to a legacy service that cannot be upgraded to use more secure configurations of TLS.

## Pseudo-code examples

### Violation

```csharp
using System;

public class ExampleClass
{
    public void ExampleMethod()
    {
        // CA5361 violation
        AppContext.SetSwitch("Switch.System.Net.DontEnableSchUseStrongCrypto", true);
    }
}
```

```vb
Imports System

Public Class ExampleClass
    Public Sub ExampleMethod()
        ' CA5361 violation
        AppContext.SetSwitch(""Switch.System.Net.DontEnableSchUseStrongCrypto"", true)
    End Sub
End Class
```

### Solution

```csharp
using System;

public class ExampleClass
{
    public void ExampleMethod()
    {
        AppContext.SetSwitch(""Switch.System.Net.DontEnableSchUseStrongCrypto"", false);
    }
}
```

```vb
Imports System

Public Class ExampleClass
    Public Sub ExampleMethod()
        AppContext.SetSwitch(""Switch.System.Net.DontEnableSchUseStrongCrypto"", false)
    End Sub
End Class
```