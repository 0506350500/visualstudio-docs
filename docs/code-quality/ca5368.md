---
title: "CA5368: Set ViewStateUserKey For Classes Derived From Page"
description: Provides information about code analysis rule CA5368, including causes, how to fix violations, and when to suppress it.
ms.date: 05/07/2020
ms.topic: reference
author: LLLXXXCCC
ms.author: linche
manager: jillfra
ms.workload:
  - "multiple"
f1_keywords:
  - "CA5368"
  - "SetViewStateUserKey"
---
# CA5368: Set ViewStateUserKey For Classes Derived From Page

|||
|-|-|
|CheckId|CA5368|
|Category|Microsoft.Security|
|Breaking change|Non-breaking|

## Cause

The <xref:System.Web.UI.Page.ViewStateUserKey?displayProperty=nameWithType> property is not assigned in <xref:System.Web.UI.Page.OnInit%2A?displayProperty=nameWithType> or <xref:System.Web.UI.Page.Page_Init%2A?displayProperty=nameWithType>.

## Rule description

Setting the <xref:System.Web.UI.Page.ViewStateUserKey> property can help you prevent attacks on your application by allowing you to assign an identifier to the view-state variable for individual users so that attackers cannot use the variable to generate an attack. Otherwise, there will be vulnerabilities to cross-site request forgery.

## How to fix violations

Set the <xref:System.Web.UI.Page.ViewStateUserKey> property as required.

## When to suppress warnings

Suppress a warning from this rule if you think cross-site request forgery vulnerabilities are acceptable in your scenario.

## Pseudo-code examples

### Violation

```csharp
using System;
using System.Web.UI;

class ExampleClass : Page
{
    protected override void OnInit (EventArgs e)
    {
    }
}
```

### Solution

```csharp
using System;
using System.Web.UI;

class ExampleClass : Page
{
    protected override void OnInit (EventArgs e)
    {
        ViewStateUserKey = Session.SessionID;
    }
}
```
